<app-expandable-section title="Evolutions">
  <div class="evolution-chain">
    <div *ngFor="let path of evolutionPaths" class="evolution-row">
      <ng-container *ngFor="let species of path; let i = index">
        <!-- Evolution Cell -->
        <div class="evolution-cell">
          <!-- If species is defined -->
          <ng-container *ngIf="species">
            <app-pokemon-card [pokemon]="species.pokemon_v2_pokemons[0]" [pokemonSpecies]="species">
            </app-pokemon-card>

            <div class="evolution-conditions">
              <ng-container *ngFor="
                let evo of getPokemonEvolution(species.id);
                let i = index;
                let last = last
              ">
                <app-evolution-condition-display *ngFor="let condition of getEvolutionConditions(evo)"
                  [condition]="condition">
                </app-evolution-condition-display>
                <hr *ngIf="!last" class="evolution-separator" />
              </ng-container>

              <div *ngIf="!isMultiStage(path)" class="no-evolution-message">
                No evolutions
              </div>
            </div>
          </ng-container>
        </div>

        <!-- Arrow between cards -->
        <ng-container *ngIf="i < path.length - 1">
          <svg class="arrow-icon" viewBox="0 0 24 24">
            <path d="m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"></path>
          </svg>
        </ng-container>
      </ng-container>
    </div>
  </div>
</app-expandable-section>
